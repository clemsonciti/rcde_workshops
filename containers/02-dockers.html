
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Docker Containers on CloudLab &#8212; Research Computing and Data Workshop</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Singularity/Apptainers on Palmetto" href="03-apptainers.html" />
    <link rel="prev" title="Introduction to CloudLab" href="01-introduction.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Research Computing and Data Workshop</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Research Computing and Data Workshops
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introductory Sequence
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro_linux/00-index.html">
   Introduction to Linux
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/00a-outline.html">
     Workshop Outline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/01-introduction.html">
     What is Linux?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/01a-shell.html">
     Shell Specifics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/02-accessing-palmetto.html">
     Accessing the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/03-file-system.html">
     Navigating Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/04-working_with_files_and_directories.html">
     Working With Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/04a-file-permissions.html">
     File Permissions and Atrributes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/05-pipes.html">
     Pipes and Redirection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/06-find.html">
     Finding Things
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/07-utilities.html">
     Utilities and Useful Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_linux/08-conclusion.html">
     Workshop Conclusion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro_palmetto/00-index.html">
   Introduction to Palmetto
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/01-introduction.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/02-accessing-palmetto.html">
     Accessing the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/03-palmetto_structure.html">
     The structure of the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/04-storage.html">
     Storage on Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/05-interactive.html">
     Running an interactive job on Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/06-file-transfer.html">
     Transferring files to and from Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/07-open-od.html">
     Web-based access to the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_palmetto/08-batch.html">
     Running a batch job
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  R
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../r_programming/00-index.html">
   Introduction to R
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/01-Introduction.html">
     Introduction to R”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/02-Basic-R.html">
     Basics of R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/03-Data-Structures.html">
     Data Structures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/04-Matrix.html">
     Vectors, Matrices, Lists and Data Frames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/05-Control-Structure.html">
     Control Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/06-Functions.html">
     Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/07-Parallel-Computing.html">
     Parallel Computing in R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/08-Basic-Plotting.html">
     Basic plotting with R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/09-Plotting-with-ggplot.html">
     Ploting with ggplot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/10-R-in-Palmetto.html">
     R in Palmetto
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../r_machine_learning/00-index.html">
   Machine Learning using R
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/01-Introduction.html">
     Introduction to Machine Learning”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/02-Caret-Preprocessing.html">
     Introduction to Caret
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/03-Caret-Data-Partition.html">
     Data Partition with caret
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/05-Training_Regression.html">
     Training Machine Learning model using Regression Method
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/06-Decision_boundaries.html">
     Classification with decision boundaries”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/07-KNN.html">
     Nearest Neighbours Classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/08-Training_Tree.html">
     Training Machine Learning model using Tree-based model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/09-Training_Ensemble.html">
     Training Machine Learning model using Ensemble approach”
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/10-Unsupervised-Learning.html">
     Unsupervised Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_machine_learning/11-Neural-Network.html">
     Neural Network
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_programming/00-index.html">
   Introduction to Python Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/01-IntroToPython-I.html">
     Introduction to Python I
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/02-IntroToPython-II.html">
     Introduction to Python II
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_sklearn/00-index.html">
   Machine Learning using Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/01-introduction.html">
     Introduction to Machine Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/02-sklearn-preprocessing.html">
     Introduction to Scikit Learn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/03-sklearn-Data-Partition.html">
     Data partition: training and testing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/04-sklearn-Evaluation-Metrics.html">
     Evaluation Metrics with Scikit-Learn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/05-Training-Regression.html">
     Supervised Learning training with Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/06-Training-Tree.html">
     Tree-based Learning Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/07-Training-Ensemble.html">
     Ensemble-based Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/08-Model_Based.html">
     Model-based Prediction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/09-Regularization.html">
     Regularization and Variable Selection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/10-Dimension-Reduction.html">
     Dimension Reduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/11-Neural-Network.html">
     Neural Network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/12-Support-Vector-Machine.html">
     Support Vector Machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/13-KNN.html">
     K-Nearest Neighbour
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/14-Unsupervised-Learning.html">
     Unsupervised Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_sklearn/15-Mini-Project.html">
     Mini-Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_deep_learning/00-index.html">
   Deep Learning in Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/01-Introduction.html">
     Introduction to Deep Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/02-Deep-Learning-Framework.html">
     Deep Learning Library Framework
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/03-Neural-Network.html">
     Recap on ANN
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/04-Intro-to-Keras.html">
     Introduction to Keras
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/05-Keras-Regression.html">
     Training Deep Learning Regression model with Keras
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/06-Keras-Classification.html">
     Training Deep Learning Classification model with Keras
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/07-Convolution-Neural-Network.html">
     Convolution Neural Network for image classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_deep_learning/08-Recurrent-neural-networks.html">
     Recurrent Neural Network for Timeseries forecasting
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Advanced Palmetto Usage
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="00-index.html">
   Containerization on Palmetto (under development)
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01-introduction.html">
     Introduction to CloudLab
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Docker Containers on CloudLab
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03-apptainers.html">
     Singularity/Apptainers on Palmetto
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../advanced_scheduling/00-index.html">
   Advanced Scheduling (under development)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../advanced_scheduling/01-introduction.html">
     1. What is Spark?
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/containers/02-dockers.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   1. Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why-do-we-want-container">
   1. Why do we want container?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-issue-who-does-what">
   2. The issue: who does what?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspiration-for-docker">
   3. Inspiration for Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspiration-for-docker-intermodal-shipping-containers">
   4. Inspiration for Docker: intermodal shipping containers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modern-shipping-ecosystem">
   5. Modern shipping ecosystem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-shipping-container-system-for-applications">
   6. A shipping container system for applications
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#who-does-what-we-don-t-care">
   7. Who does what? We don’t care …
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloud-native-applications-on-container">
   8. Cloud-native applications on container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-getting-started">
   9. Hands-on: Getting started
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-hello-world">
   10. Hands-on: Hello world
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-interactive-container">
   11. Hands-on: Interactive container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-run-something-interactively">
   12. Hands-on: run something interactively
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-installing-and-then-running">
   13. Hands-on: installing and then running
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise">
   14. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-background-container">
   15. Hands-on: Background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   16. Hands-on: Background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-view-log-of-your-background-container">
   17. Hands-on: View log of your background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   18. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docker-images">
   19. Docker images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-of-a-java-webapp">
   20. Example of a Java webapp
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-read-write-layer">
   21. The read-write layer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#containers-versus-images">
   22. Containers versus images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-we-change-an-image">
   23. How do we change an image?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-namespaces">
   24. Image namespaces
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-show-current-images">
   25. Hands-on: show current images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-search-images">
   26. Hands-on: search images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-steps-to-create-an-image">
   27. General steps to create an image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-create-a-container-with-a-base-distro">
   28. Hands-on: create a container with a base distro
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-install-software-inside-the-container">
   29. Hands-on: install software inside the container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-check-for-differences">
   30. Hands-on: check for differences
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-commit-changes-into-a-new-image">
   31. Hands-on: commit changes into a new image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   32. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automatic-image-construction-dockerfile">
   33. Automatic image construction: Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-writing-the-first-dockerfile">
   34. Hands on: writing the first Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-build-the-image">
   35. Hands on: build the image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   36. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-cmd">
   37. Hands on: CMD
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-overriding-cmd">
   38. Hands on: Overriding CMD
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-entrypoint">
   39. Hands on: ENTRYPOINT
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-why-not-both">
   40. Hands on: Why not both
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-caveat">
   41. Hands on: Caveat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-importing-and-building-external-code">
   42. Hands on: Importing and building external code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#challenge">
   43. Challenge
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#networking-for-container">
   44. Networking for container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-a-simple-web-server">
   45. Hands on: a simple web server
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-how-does-the-container-engine-know-which-port-to-map">
   47. Hands on: How does the container engine know which port to map?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-manual-allocation-of-port-numbers">
   48. Hands on: manual allocation of port numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#integrating-containers-into-your-infrastructure">
   49. Integrating containers into your infrastructure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#container-network-model">
   50. Container network model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-create-a-network">
   51. Hands on: create a network
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-placing-containers-on-a-network">
   52. Hands on: placing containers on a network
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Docker Containers on CloudLab</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   1. Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why-do-we-want-container">
   1. Why do we want container?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-issue-who-does-what">
   2. The issue: who does what?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspiration-for-docker">
   3. Inspiration for Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#inspiration-for-docker-intermodal-shipping-containers">
   4. Inspiration for Docker: intermodal shipping containers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modern-shipping-ecosystem">
   5. Modern shipping ecosystem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-shipping-container-system-for-applications">
   6. A shipping container system for applications
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#who-does-what-we-don-t-care">
   7. Who does what? We don’t care …
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cloud-native-applications-on-container">
   8. Cloud-native applications on container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-getting-started">
   9. Hands-on: Getting started
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-hello-world">
   10. Hands-on: Hello world
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-interactive-container">
   11. Hands-on: Interactive container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-run-something-interactively">
   12. Hands-on: run something interactively
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-installing-and-then-running">
   13. Hands-on: installing and then running
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise">
   14. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-background-container">
   15. Hands-on: Background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   16. Hands-on: Background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-view-log-of-your-background-container">
   17. Hands-on: View log of your background container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   18. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docker-images">
   19. Docker images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example-of-a-java-webapp">
   20. Example of a Java webapp
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-read-write-layer">
   21. The read-write layer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#containers-versus-images">
   22. Containers versus images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-we-change-an-image">
   23. How do we change an image?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#image-namespaces">
   24. Image namespaces
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-show-current-images">
   25. Hands-on: show current images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-search-images">
   26. Hands-on: search images
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-steps-to-create-an-image">
   27. General steps to create an image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-create-a-container-with-a-base-distro">
   28. Hands-on: create a container with a base distro
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-install-software-inside-the-container">
   29. Hands-on: install software inside the container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-check-for-differences">
   30. Hands-on: check for differences
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-commit-changes-into-a-new-image">
   31. Hands-on: commit changes into a new image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   32. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automatic-image-construction-dockerfile">
   33. Automatic image construction: Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-writing-the-first-dockerfile">
   34. Hands on: writing the first Dockerfile
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-build-the-image">
   35. Hands on: build the image
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   36. Exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-cmd">
   37. Hands on: CMD
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-overriding-cmd">
   38. Hands on: Overriding CMD
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-entrypoint">
   39. Hands on: ENTRYPOINT
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-why-not-both">
   40. Hands on: Why not both
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-caveat">
   41. Hands on: Caveat
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-importing-and-building-external-code">
   42. Hands on: Importing and building external code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#challenge">
   43. Challenge
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#networking-for-container">
   44. Networking for container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-a-simple-web-server">
   45. Hands on: a simple web server
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-how-does-the-container-engine-know-which-port-to-map">
   47. Hands on: How does the container engine know which port to map?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-manual-allocation-of-port-numbers">
   48. Hands on: manual allocation of port numbers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#integrating-containers-into-your-infrastructure">
   49. Integrating containers into your infrastructure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#container-network-model">
   50. Container network model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-create-a-network">
   51. Hands on: create a network
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hands-on-placing-containers-on-a-network">
   52. Hands on: placing containers on a network
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="docker-containers-on-cloudlab">
<h1>Docker Containers on CloudLab<a class="headerlink" href="#docker-containers-on-cloudlab" title="Permalink to this headline">#</a></h1>
<section id="setup">
<h2>1. Setup<a class="headerlink" href="#setup" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Go to your previouysly created GitHub project repository (on the first day), create a new
branch called <code class="docutils literal notranslate"><span class="pre">docker</span></code> from the <code class="docutils literal notranslate"><span class="pre">main</span></code> (or <code class="docutils literal notranslate"><span class="pre">master</span></code>) branch.</p></li>
</ul>
<div class="dropdown admonition">
<p class="admonition-title">Create new branch</p>
<p><img alt="Create new Git branch" src="../_images/github-branch-docker.png" /></p>
</div>
<ul class="simple">
<li><p>Modify the <code class="docutils literal notranslate"><span class="pre">profile.py</span></code> file to the following content</p></li>
</ul>
<div class="dropdown admonition">
<p class="admonition-title">Modification of <a class="reference external" href="http://profile.py">profile.py</a></p>
<script src="https://gist.github.com/linhbngo/6d5747ab8f04763f9dc265c361d7ebcf.js?file=profile-basic.py"></script>
</div>
<p>and modify to add the following
components from <a class="reference external" href="https://github.com/CSC468-WCU/csc468cloud/tree/docker">this link</a>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">docker_config</span></code> directory and its content (<code class="docutils literal notranslate"><span class="pre">daemon.json</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">install_docker.sh</span></code> file.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">profile.py</span></code> file.</p></li>
<li><p><strong>Check and make sure all the contents are correctly copied!</strong></p></li>
<li><p>Go to CloudLab, open your profile, switch to <code class="docutils literal notranslate"><span class="pre">Edit</span></code> mode and click <code class="docutils literal notranslate"><span class="pre">Update</span></code>. The new <code class="docutils literal notranslate"><span class="pre">docker</span></code> branch should show up.</p></li>
<li><p>Instantiate an experiment from this branch.</p></li>
<li><p><strong>Only login after the Startup column becomes Finished</strong> and type the following command: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">info</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">&quot;Docker</span> <span class="pre">Root</span> <span class="pre">Dir&quot;</span></code></p></li>
<li><p>Confirm that you have something similar to the screenshot below</p></li>
</ul>
<p><img alt="Create new Git branch" src="../_images/github-branch-docker.png" /></p>
<img src="../fig/07-docker/00.png" style="height:100px">
</section>
<section id="why-do-we-want-container">
<h2>1. Why do we want container?<a class="headerlink" href="#why-do-we-want-container" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/01.png" style="height:400px">
</section>
<section id="the-issue-who-does-what">
<h2>2. The issue: who does what?<a class="headerlink" href="#the-issue-who-does-what" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/02.png" style="height:400px">
</section>
<section id="inspiration-for-docker">
<h2>3. Inspiration for Docker<a class="headerlink" href="#inspiration-for-docker" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/03.png" style="height:400px">
</section>
<section id="inspiration-for-docker-intermodal-shipping-containers">
<h2>4. Inspiration for Docker: intermodal shipping containers<a class="headerlink" href="#inspiration-for-docker-intermodal-shipping-containers" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/04.png" style="height:400px">
</section>
<section id="modern-shipping-ecosystem">
<h2>5. Modern shipping ecosystem<a class="headerlink" href="#modern-shipping-ecosystem" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/05.png" style="height:400px">
</section>
<section id="a-shipping-container-system-for-applications">
<h2>6. A shipping container system for applications<a class="headerlink" href="#a-shipping-container-system-for-applications" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/06.png" style="height:400px">
</section>
<section id="who-does-what-we-don-t-care">
<h2>7. Who does what? We don’t care …<a class="headerlink" href="#who-does-what-we-don-t-care" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/07.png" style="height:400px">
</section>
<section id="cloud-native-applications-on-container">
<h2>8. Cloud-native applications on container<a class="headerlink" href="#cloud-native-applications-on-container" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/08.png" style="height:400px">
</section>
<section id="hands-on-getting-started">
<h2>9. Hands-on: Getting started<a class="headerlink" href="#hands-on-getting-started" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>SSH into your CloudLab experiment.</p></li>
<li><p>Check version of Docker:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker version
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/09.png" style="height:600px">
<ul class="simple">
<li><p>Docker is client-server application.</p>
<ul>
<li><p>Docker daemon (Engine): receives and processes incoming Docker API request
and requires root privilege.</p></li>
<li><p>Docker Hub registry: collection of public images (<a class="reference external" href="https://hub.docker.com/">https://hub.docker.com/</a>).</p></li>
<li><p>Docker client : Talks to the Docker daemon via the docker API and the registry API.</p></li>
</ul>
</li>
</ul>
</section>
<section id="hands-on-hello-world">
<h2>10. Hands-on: Hello world<a class="headerlink" href="#hands-on-hello-world" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Docker <code class="docutils literal notranslate"><span class="pre">containers</span></code> are instantiated from Docker <code class="docutils literal notranslate"><span class="pre">images</span></code>.</p></li>
<li><p>You can check availability of local <code class="docutils literal notranslate"><span class="pre">images</span></code> and <code class="docutils literal notranslate"><span class="pre">containers</span></code>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker image ls
$ docker container ls
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/10.png" style="height:100px">
<ul class="simple">
<li><p>We can issue the following to start a service that will echo <code class="docutils literal notranslate"><span class="pre">hello</span> <span class="pre">world</span></code> to the screen.</p></li>
<li><p>This requires a Linux container to run the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run alpine echo hello world
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span></code>: invoke the container engine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run</span></code>: subcommand to run a container.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alpine</span></code>: name of the image based on which a container will be launched.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">hello</span> <span class="pre">world</span></code>: the command to be executed in the container environment.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker image ls
$ docker container ls
$ docker container ls --all
$ docker run alpine echo hello world
$ docker container ls --all
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/11.png" style="height:400px">
</section>
<section id="hands-on-interactive-container">
<h2>11. Hands-on: Interactive container<a class="headerlink" href="#hands-on-interactive-container" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>We can launch a container and get into the shell of the container.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it ubuntu bash
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/12.png" style="height:150px">
<ul class="simple">
<li><p>You are now in a new prompt: a shell inside the container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-it</span></code>: combination of <code class="docutils literal notranslate"><span class="pre">-i</span></code> and <code class="docutils literal notranslate"><span class="pre">-t</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span></code> tells Docker to connect to the container’s stdin for interactive mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span></code> tells Docker that we want a pseudo-terminal</p></li>
</ul>
</li>
</ul>
</section>
<section id="hands-on-run-something-interactively">
<h2>12. Hands-on: run something interactively<a class="headerlink" href="#hands-on-run-something-interactively" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The following commands are done inside the container.</p></li>
<li><p>Let’s attempt to run <code class="docutils literal notranslate"><span class="pre">figlet</span></code></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># figlet hello</span>
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p>There will be an error.</p></li>
<li><p>The current container does not have the <code class="docutils literal notranslate"><span class="pre">figlet</span></code> program yet.</p></li>
</ul>
</section>
<section id="hands-on-installing-and-then-running">
<h2>13. Hands-on: installing and then running<a class="headerlink" href="#hands-on-installing-and-then-running" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The following commands are done inside the container.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># apt-get update</span>
<span class="c1"># apt-get install -y figlet</span>
<span class="c1"># figlet hello</span>
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/13.png" style="height:600px">
</section>
<section id="exercise">
<h2>14. Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to shutdown the container and back to your normal terminal.</p></li>
<li><p>Repeat the process of launching an interactive container from start and try
running <code class="docutils literal notranslate"><span class="pre">figlet</span></code> again.</p></li>
<li><p>Is the program still there?</p></li>
</ul>
<p>{: .challenge}</p>
</section>
<section id="hands-on-background-container">
<h2>15. Hands-on: Background container<a class="headerlink" href="#hands-on-background-container" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>You should have already exited out of the container shell and back to the CloudLab environment.</p></li>
<li><p>Run the following command</p></li>
<li><p>Press <code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code> to stop after a few time stamps.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run jpetazzo/clock
</pre></div>
</div>
<p>{: .language-bash}</p>
</section>
<section id="id1">
<h2>16. Hands-on: Background container<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Run the following command</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -d jpetazzo/clock
$ docker ps
</pre></div>
</div>
<p>{: .language-bash}</p>
</section>
<section id="hands-on-view-log-of-your-background-container">
<h2>17. Hands-on: View log of your background container<a class="headerlink" href="#hands-on-view-log-of-your-background-container" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Use the first four characters of your container ID to view the log of the running Docker container</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">--tail</span> <span class="pre">N</span></code> to only look at the tail of the log.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker container ls
$ docker logs --tail 5 YOUR_CONTAINER_ID
</pre></div>
</div>
</section>
<section id="id2">
<h2>18. Exercise<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Find out how to kill a running container by using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">kill</span></code>.
{: .challenge}</p></li>
</ul>
</section>
<section id="docker-images">
<h2>19. Docker images<a class="headerlink" href="#docker-images" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Image = files + metadata</p></li>
<li><p>The files form the root filesystem of the container</p></li>
<li><p>The metadata describes things such as:</p>
<ul>
<li><p>The author of the image</p></li>
<li><p>The command to execute in container when starting it</p></li>
<li><p>Environment variables to be set</p></li>
<li><p>…</p></li>
</ul>
</li>
<li><p>Images are made of layers, conceptually stacked on top of each other.</p></li>
<li><p>Each layer can add, change, and remove files and/or metadata.</p></li>
<li><p>Images can share layers to optimize disk usage, transfer times, and memory use.</p></li>
</ul>
<p>{:  .slide}</p>
</section>
<section id="example-of-a-java-webapp">
<h2>20. Example of a Java webapp<a class="headerlink" href="#example-of-a-java-webapp" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>CentOS base layer</p></li>
<li><p>Packages and configuration files added by our local IT</p></li>
<li><p>JRE</p></li>
<li><p>Tomcat</p></li>
<li><p>Our application’s dependencies</p></li>
<li><p>Our application code and assets</p></li>
<li><p>Our application configuration</p></li>
</ul>
<p>{:  .slide}</p>
</section>
<section id="the-read-write-layer">
<h2>21. The read-write layer<a class="headerlink" href="#the-read-write-layer" title="Permalink to this headline">#</a></h2>
<img src="../fig/07-docker/25.png" style="height:500px">
<p>{:  .slide}</p>
</section>
<section id="containers-versus-images">
<h2>22. Containers versus images<a class="headerlink" href="#containers-versus-images" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>An image is a read-only filesystem.</p></li>
<li><p>A container is an encapsulated set of processes running in a
read-write copy of that filesystem.</p></li>
<li><p>To optimize container boot time, copy-on-write is used instead of regular copy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> starts a container from a given image.</p></li>
</ul>
<img src="../fig/07-docker/26.png" style="height:500px">
<ul class="simple">
<li><p>Object-oriented analogy</p>
<ul>
<li><p>Images are conceptually similar to classes</p></li>
<li><p>Layers are conceptually similar to inheritance</p></li>
<li><p>Containers are conceptually similar to instances</p></li>
</ul>
</li>
</ul>
<p>{:  .slide}</p>
</section>
<section id="how-do-we-change-an-image">
<h2>23. How do we change an image?<a class="headerlink" href="#how-do-we-change-an-image" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>It is read-only, we don’t.</p></li>
<li><p>We create a new container from the image</p></li>
<li><p>We make changes to the container.</p></li>
<li><p>When we are satisfied with the changes, we transform them into a new layer.</p></li>
<li><p>A new image is created by stacking the new layer on top of the old image.</p></li>
</ul>
<p>{:  .slide}</p>
</section>
<section id="image-namespaces">
<h2>24. Image namespaces<a class="headerlink" href="#image-namespaces" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Official images (ubuntu, busybox, …)</p>
<ul>
<li><p>Root namespace.</p></li>
<li><p>Small, distro images to be used as bases for the building process.</p></li>
<li><p>Ready-to-use components and services (redis, postgresl …)</p></li>
</ul>
</li>
<li><p>User (and organizations) images: <code class="docutils literal notranslate"><span class="pre">&lt;registry_name&gt;/&lt;image_name&gt;:[version]</span></code></p>
<ul>
<li><p>jpetazzo/clock:latest</p></li>
<li><p>linhbngo/csc331:latest</p></li>
</ul>
</li>
<li><p>Self-hosted images</p>
<ul>
<li><p>Images hosted by third party registry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URL/&lt;image_name&gt;</span></code></p></li>
</ul>
</li>
</ul>
<p>{:  .slide}</p>
</section>
<section id="hands-on-show-current-images">
<h2>25. Hands-on: show current images<a class="headerlink" href="#hands-on-show-current-images" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>If this is a new experiment, go ahead and run the following commands to get
some images loaded.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run hello-world
$ docker run alpine echo This is alpine
$ docker run ubuntu echo This is ubuntu
$ docker image ls
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/27.png" style="height:200px">
</section>
<section id="hands-on-search-images">
<h2>26. Hands-on: search images<a class="headerlink" href="#hands-on-search-images" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>We can search for available images in the public Docker Hub</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker search mysql
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/28.png" style="height:500px">
</section>
<section id="general-steps-to-create-an-image">
<h2>27. General steps to create an image<a class="headerlink" href="#general-steps-to-create-an-image" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Create a container using an appropriate base distro</p></li>
<li><p>Inside the container, install and setup the necessary software</p></li>
<li><p>Review the changes in the container</p></li>
<li><p>Turn the container into a new image</p></li>
<li><p>Tag the image</p></li>
</ul>
<img src="../fig/07-docker/31.png" style="height:500px">
</section>
<section id="hands-on-create-a-container-with-a-base-distro">
<h2>28. Hands-on: create a container with a base distro<a class="headerlink" href="#hands-on-create-a-container-with-a-base-distro" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Remember to note your container ID.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it ubuntu
</pre></div>
</div>
<p>{: .language-bash}</p>
</section>
<section id="hands-on-install-software-inside-the-container">
<h2>29. Hands-on: install software inside the container<a class="headerlink" href="#hands-on-install-software-inside-the-container" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># apt-get update</span>
<span class="c1"># apt-get install -y figlet</span>
<span class="c1"># exit</span>
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/32.png" style="height:500px">
</section>
<section id="hands-on-check-for-differences">
<h2>30. Hands-on: check for differences<a class="headerlink" href="#hands-on-check-for-differences" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Remember to note your container ID.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker diff 16b0
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/33.png" style="height:500px">
<ul class="simple">
<li><p>A: A file or directory was added</p></li>
<li><p>D: A file or directory was deleted</p></li>
<li><p>C: A file or directory was changed</p></li>
</ul>
</section>
<section id="hands-on-commit-changes-into-a-new-image">
<h2>31. Hands-on: commit changes into a new image<a class="headerlink" href="#hands-on-commit-changes-into-a-new-image" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Remember to note your container ID.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker commit 16b0 ubuntu_figlet_$USER
$ docker image ls
$ docker history fe101
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/34.png" style="height:500px">
<ul class="simple">
<li><p>From the screenshot:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">commit</span> <span class="pre">...</span></code> command created a new image named <code class="docutils literal notranslate"><span class="pre">ubuntu_figlet_lngo</span></code> that
has the following unique id: <code class="docutils literal notranslate"><span class="pre">fe101865e2ed</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">image</span> <span class="pre">ls</span></code> command shows this image.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">history</span> <span class="pre">fe101</span></code> shows the layers making up this image, which include
the layer that is the base ubuntu image <code class="docutils literal notranslate"><span class="pre">54c9d</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id3">
<h2>32. Exercise<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Test run the new <code class="docutils literal notranslate"><span class="pre">ubuntu_figlet</span></code> image by launching an interactive container
using this image, then immediately run <code class="docutils literal notranslate"><span class="pre">figlet</span> <span class="pre">hello</span> <span class="pre">world</span></code>.</p></li>
</ul>
<p>{: .challenge}</p>
</section>
<section id="automatic-image-construction-dockerfile">
<h2>33. Automatic image construction: Dockerfile<a class="headerlink" href="#automatic-image-construction-dockerfile" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>A build recipe for a container image.</p></li>
<li><p>Contains a series of instructions telling Docker/Podman how an image is to be constructed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> command builds an image from a Dockerfile.</p></li>
</ul>
</section>
<section id="hands-on-writing-the-first-dockerfile">
<h2>34. Hands on: writing the first Dockerfile<a class="headerlink" href="#hands-on-writing-the-first-dockerfile" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The following commands are done in the terminal (Ubuntu WSL on Windows/Mac Terminal).</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd
$ mkdir myimage
$ cd myimage
$ nano Dockerfile
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p>Type the following contents into the nano editor</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=Dockerfile.1"></script>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FROM</span></code>: the base image for the build</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RUN</span></code>: represents one layer of execution.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RUN</span></code> commands must be non-interactive.</p></li>
<li><p>Save and quit after you are done.</p></li>
<li><p>To build the image</p></li>
</ul>
</section>
<section id="hands-on-build-the-image">
<h2>35. Hands on: build the image<a class="headerlink" href="#hands-on-build-the-image" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The following commands are done in the terminal (Ubuntu WSL on Windows/Mac Terminal).</p></li>
<li><p>Check that you are still inside <code class="docutils literal notranslate"><span class="pre">myimage</span></code></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pwd
$ docker build -t figlet_$USER .
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-t</span></code> indicates a tag named <code class="docutils literal notranslate"><span class="pre">figlet</span></code> will be applied to the image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> indicates that the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> file is in the current directory.</p></li>
</ul>
<img src="../fig/07-docker/35.png" style="height:1000px">
<ul class="simple">
<li><p>The build context is the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> file in the current directory (<code class="docutils literal notranslate"><span class="pre">.</span></code>)
and is sent to the container engine. This context allows constructions of images
with additional resources from local files inside the build context.</p></li>
<li><p>The base image is <code class="docutils literal notranslate"><span class="pre">Ubuntu</span></code>.</p></li>
<li><p>For each <code class="docutils literal notranslate"><span class="pre">RUN</span></code> statement, a container is created from the base image for the execution of the</p></li>
<li><p>commands. Afterward, the resulting container is committed into an image that becomes the
base for the next <code class="docutils literal notranslate"><span class="pre">RUN</span></code>.</p></li>
</ul>
</section>
<section id="id4">
<h2>36. Exercise<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">image</span> <span class="pre">ls</span></code> and <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">history</span> <span class="pre">...</span></code> to check which layer is reused for
this image.</p></li>
<li><p>Test run the new <code class="docutils literal notranslate"><span class="pre">ubuntu_figlet</span></code> image by launching an interactive container
using this image, then immediately run <code class="docutils literal notranslate"><span class="pre">figlet</span> <span class="pre">hello</span> <span class="pre">world</span></code>.</p></li>
</ul>
<p>{: .challenge}</p>
</section>
<section id="hands-on-cmd">
<h2>37. Hands on: CMD<a class="headerlink" href="#hands-on-cmd" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Edit your Dockerfile so that it has the following content</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=Dockerfile.2"></script>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMD</span></code>: The command to be run if the container is invoked without
any command.</p></li>
<li><p>Rebuild the image with the tag <code class="docutils literal notranslate"><span class="pre">figlet_cmd_$USER</span></code>.</p></li>
<li><p>Run the following command</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run figlet_cmd_$USER
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/36.png" style="height:600px">
<ul class="simple">
<li><p>Question: Did we use any additional storage for this new image?</p></li>
</ul>
</section>
<section id="hands-on-overriding-cmd">
<h2>38. Hands on: Overriding CMD<a class="headerlink" href="#hands-on-overriding-cmd" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>With CMD, the <code class="docutils literal notranslate"><span class="pre">-it</span></code> flag does not behave as expected
without a parameter.</p></li>
<li><p>To override CMD, we can provide a command</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it figlet_cmd_$USER
$ docker run -it figlet_cmd_$USER bash
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/37.png" style="height:600px">
</section>
<section id="hands-on-entrypoint">
<h2>39. Hands on: ENTRYPOINT<a class="headerlink" href="#hands-on-entrypoint" title="Permalink to this headline">#</a></h2>
<p>-<code class="docutils literal notranslate"><span class="pre">ENTRYPOINT</span></code> defines a base command (and its parameters)
for the container.</p>
<ul class="simple">
<li><p>The command line arguments are appended to those parameters.</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> as follows:</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=Dockerfile.3"></script>
<ul class="simple">
<li><p>Rebuild the image with the tag <code class="docutils literal notranslate"><span class="pre">figlet_entry_$USER</span></code>.</p></li>
<li><p>Run the followings:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run figlet_entry_$USER golden rams
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/38.png" style="height:600px">
</section>
<section id="hands-on-why-not-both">
<h2>40. Hands on: Why not both<a class="headerlink" href="#hands-on-why-not-both" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ENTRYPOINT</span></code> and <code class="docutils literal notranslate"><span class="pre">CMD</span></code> can be used together.</p></li>
<li><p>The command line arguments are appended to those parameters.</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> as follows:</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=Dockerfile.4"></script>
<ul class="simple">
<li><p>Rebuild the image with the tag <code class="docutils literal notranslate"><span class="pre">figlet_both_$USER</span></code>.</p></li>
<li><p>Run the followings:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run figlet_both_$USER golden rams
$ docker run figlet_both_$USER
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/39.png" style="height:700px">
</section>
<section id="hands-on-caveat">
<h2>41. Hands on: Caveat<a class="headerlink" href="#hands-on-caveat" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/bin/bash</span></code> does not work as expected.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it figlet_both_$USER bash
$ docker run -it --entrypoint bash figlet_both_$USER
# exit
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/40.png" style="height:300px">
</section>
<section id="hands-on-importing-and-building-external-code">
<h2>42. Hands on: Importing and building external code<a class="headerlink" href="#hands-on-importing-and-building-external-code" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Create the following file called <code class="docutils literal notranslate"><span class="pre">hello.c</span></code>:</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=hello.c"></script>
<ul class="simple">
<li><p>Create the following Dockerfile called <code class="docutils literal notranslate"><span class="pre">Dockerfile.hello</span></code>:</p></li>
</ul>
<script src="https://gist.github.com/linhbngo/b9f794bed306562f2eb85da310ae7b5e.js?file=Dockerfile.5"></script>
<ul class="simple">
<li><p>You can build an image with a specific Dockerfile</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker build -t hello_$USER -f Dockerfile.hello .
$ docker run hello_$USER
</pre></div>
</div>
<p>{: .language-bash}</p>
</section>
<section id="challenge">
<h2>43. Challenge<a class="headerlink" href="#challenge" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Create an account on <a class="reference external" href="https://hub.docker.com">Docker Hub</a>.</p></li>
<li><p>Find out how to login from the command line and push the recently created <code class="docutils literal notranslate"><span class="pre">hello</span></code> image
to your Docker Hub account.</p></li>
</ul>
<p>{: .challenge}</p>
</section>
<section id="networking-for-container">
<h2>44. Networking for container<a class="headerlink" href="#networking-for-container" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>How can services provided by a container become available to the world?</p></li>
</ul>
<img src="../fig/07-docker/43.png" style="height:300px">
</section>
<section id="hands-on-a-simple-web-server">
<h2>45. Hands on: a simple web server<a class="headerlink" href="#hands-on-a-simple-web-server" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -d -P nginx
$ docker ps
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-P</span></code>: make this service reachable from other computers (<code class="docutils literal notranslate"><span class="pre">--publish-all</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span></code> : run in background</p></li>
<li><p>Where is the port?</p></li>
</ul>
<img src="../fig/07-docker/44.png" style="height:300px">
<img src="../fig/07-docker/45.png" style="height:300px">
</section>
<section id="hands-on-how-does-the-container-engine-know-which-port-to-map">
<h2>47. Hands on: How does the container engine know which port to map?<a class="headerlink" href="#hands-on-how-does-the-container-engine-know-which-port-to-map" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>This is described in the <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> and can be inspected.</p></li>
<li><p>The keyword for this action is <code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code>.</p></li>
</ul>
<img src="../fig/07-docker/46.png" style="height:100px">
<ul class="simple">
<li><p>Why do we have to map ports?</p>
<ul>
<li><p>Containers cannot have public IPv4 addresses.</p></li>
<li><p>We are running low on IPv4 addresses anyway.</p></li>
<li><p>Internally to host, containers have their own private addresses</p>
<ul>
<li><p>Services have to be exposed port by port.</p></li>
<li><p>These have to be mapped to avoid conflicts.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="hands-on-manual-allocation-of-port-numbers">
<h2>48. Hands on: manual allocation of port numbers<a class="headerlink" href="#hands-on-manual-allocation-of-port-numbers" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -d -p 8000:80 nginx
$ docker run -d -p 8080:80 -p 8888:80 nginx
</pre></div>
</div>
<p>{: .language-bash}</p>
<ul class="simple">
<li><p>Convention: <code class="docutils literal notranslate"><span class="pre">port-on-host:port-on-container</span></code></p></li>
<li><p>Check out the web servers at all of these ports</p></li>
</ul>
</section>
<section id="integrating-containers-into-your-infrastructure">
<h2>49. Integrating containers into your infrastructure<a class="headerlink" href="#integrating-containers-into-your-infrastructure" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Manually add the containers to the infrastructure via container-generated public port.</p></li>
<li><p>Predetermine a port on the infrastructure, then set the corresponding port mapping
when run the containers.</p></li>
<li><p>Use a network plugin to connect the containers with network tunnels/VLANS …</p></li>
<li><p>Deploy containers across a physical cluster using Kubernetes.</p></li>
</ul>
</section>
<section id="container-network-model">
<h2>50. Container network model<a class="headerlink" href="#container-network-model" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Provide the notion of a <code class="docutils literal notranslate"><span class="pre">network</span></code> to connect containers</p></li>
<li><p>Provide top level command to manipulate and observe these networks:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">network</span></code></p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker network
$ docker network ls
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/47.png" style="height:400px">
<ul class="simple">
<li><p>What’s in a container network?</p>
<ul>
<li><p>Conceptually, it is a virtual switch</p></li>
<li><p>It can be local to a single Engine (on a single host) or global
(spanning multiple hosts).</p></li>
<li><p>It has an associated IP subnet.</p></li>
<li><p>The container engine will allocate IP addresses to the containers connected to a network.</p></li>
<li><p>Containers can be connected to multiple networks.</p></li>
<li><p>Containers can be given per-network names and aliases.</p></li>
<li><p>The name and aliases can be resolved via an embedded DNS server.</p></li>
</ul>
</li>
</ul>
</section>
<section id="hands-on-create-a-network">
<h2>51. Hands on: create a network<a class="headerlink" href="#hands-on-create-a-network" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker network create ramnet
$ docker network ls
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/48.png" style="height:200px">
</section>
<section id="hands-on-placing-containers-on-a-network">
<h2>52. Hands on: placing containers on a network<a class="headerlink" href="#hands-on-placing-containers-on-a-network" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -d --name es --net ramnet elasticsearch:2
$ docker run -it --net ramnet alpine sh
# ping es
# exit
</pre></div>
</div>
<p>{: .language-bash}</p>
<img src="../fig/07-docker/49.png" style="height:600px">
<p>{% include <a class="reference external" href="http://links.md">links.md</a> %}</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./containers"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="01-introduction.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction to CloudLab</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="03-apptainers.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Singularity/Apptainers on Palmetto</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Linh Ngo<br/>
  
    <div class="extra_footer">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"></a> <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Research Computing and Data Workshops</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>